---
import { getAllMatch } from '@services/scheduleTeam.js'
import NextMatchRow from '@components/NextMatchRow.astro'

const schedule = await getAllMatch()

const { teamId } = Astro.props

console.log(teamId)

---
{
	schedule.map((fecha) => {
		return (
			<section>
				<h2 class='font-bold text-xl my-8'>{fecha.round}</h2>
				<table class='w-full'>
					<tbody>
						{fecha.matches.filter(match =>
							match.teams[0].shortName === teamId || match.teams[1].shortName === teamId).map((match) => (
							<NextMatchRow
								local={match.teams[0]}
								visitant={match.teams[1]}
								score={match.score}
								date={match.date}
								hour={match.hour}
							/>								
						))}
					</tbody>
				</table>
			</section>
		)
	})
}