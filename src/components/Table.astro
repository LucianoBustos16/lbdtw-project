---
// const response = await fetch( 'https://api.lbdtwplus.com.ar/leaderboardLPF' );
// const leaderboardLPF = await response.json();

import { findLeaderboardBy } from '@services/leaderboardAuto.js'

const { shortName, league } = Astro.props

const leaderboard = await findLeaderboardBy({shortName})
---

<div class="relative overflow-x-auto shadow-md rounded-2xl">
    <table class="w-full text-sm text-center text-gray-500">
        <thead class="text-xs text-gray-700 bg-white">
            <tr>
                <th scope="col" class="px-2 py-3">
                    #
                </th>
                <th scope="col" class="px-2 py-3 text-left">
                    Equipo
                </th>
                <th scope="col" class="px-2 py-3">
                    Pts.
                </th>
                <th scope="col" class="px-2 py-3">
                    PJ
                </th>
                <th scope="col" class="px-2 py-3">
                    PG
                </th>
                <th scope="col" class="px-2 py-3">
                    PE
                </th>
                <th scope="col" class="px-2 py-3">
                    PP
                </th>
                <th scope="col" class="px-2 py-3">
                    GF
                </th>
                <th scope="col" class="px-2 py-3">
                    GC
                </th>
                <th scope="col" class="px-2 py-3">
                    Dif.
                </th>
            </tr>
        </thead>
        <tbody>

            {leaderboard.map(({ team, rank, points, matchesPlayed, matchesWon, matchesDrawn, matchesLost, goalsFor, goalsAgainst, goalDifference }) => (
            <tr class={`bg-white border-b  hover:bg-gray-50 `}>
                <th scope="row" class="px-2 py-4 font-bold text-teal-600">
                    <div class="font-normal text-gray-500 text-center">
                        {rank}
                    </div>
                </th>
                <th scope="row" class=" px-2 py-4 text-gray-900 whitespace-nowrap">
                    <a
                        href={`/equipos/${team.id}`}
                        class="flex gap-1 items-center group transition-all hover:scale-105"
                    >
                    <img src={team.image} alt={`Escudo de ${team.name}`} class=" w-6" width="24" height="24">
                    <div class="font-normal hidden md:block">{team.name}</div>
                    <div class="font-normal md:hidden">{team.shortName}</div>
                    </a>
                </th>
                <th scope="row" class="px-2 py-4 font-black text-teal-600">
                    {points}
                </th>
                <th scope="row" class="font-normal px-2 py-4 text-gray-900 whitespace-nowrap">
                    {matchesPlayed}
                </th>
                <th scope="row" class="font-normal px-2 py-4 text-gray-900 whitespace-nowrap">
                    {matchesWon}
                </th>
                <th scope="row" class="font-normal px-2 py-4 text-gray-900 whitespace-nowrap">
                    {matchesDrawn}
                </th>
                <th scope="row" class="font-normal px-2 py-4 text-gray-900 whitespace-nowrap">
                    {matchesLost}
                </th>
                <th scope="row" class="font-normal px-2 py-4 text-gray-900 whitespace-nowrap">
                    {goalsFor}
                </th>
                <th scope="row" class="font-normal px-2 py-4 text-gray-900 whitespace-nowrap">
                    {goalsAgainst}
                </th>
                <th scope="row" class="font-normal px-2 py-4 text-gray-900 whitespace-nowrap">
                    {goalDifference}
                </th>
            </tr>
            ))}


        </tbody>
    </table>
</div>